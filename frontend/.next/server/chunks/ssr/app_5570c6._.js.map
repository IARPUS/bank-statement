{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/roychoi/Desktop/projects/bank-analysis/frontend/app/utils/files.tsx"],"sourcesContent":["export async function uploadFile(bucketName: string, filePath: string, file) {\n  console.log(\"Uploading file to s3\")\n  try {\n    // Create a FormData object\n    const formData = new FormData();\n    formData.append(\"bucketName\", bucketName);\n    formData.append(\"filePath\", filePath);\n    formData.append(\"file\", file);\n\n    // Send a POST request to the Next.js API route\n    const response = await fetch(\"/api/files/upload\", {\n      method: \"POST\",\n      body: formData,\n    });\n\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(`Failed to upload file: ${error}`);\n    }\n\n    const data = await response.json();\n    console.log(data.message);\n    alert(\"File uploaded successfully!\");\n  } catch (error) {\n    console.error(\"Error uploading file:\", error);\n    alert(\"Error uploading file: \" + error.message);\n  }\n}\nexport async function fetchBankStatementData(bucketName: string, filePath: string) {\n  console.log(\"Retrieving statement analysis data from textract\")\n  try {\n    const response = await fetch(\"/api/textract\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ bucketName, filePath }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.message || \"Failed to fetch Textract data\");\n    }\n\n    const data = await response.json();\n    console.log(\"Extracted data:\", data);\n    return data;\n  } catch (error) {\n    console.error(\"Error fetching Textract data:\", error);\n    alert(\"Error fetching bank statement data: \" + error.message);\n  }\n}\nexport async function getMetaData(bucketName: string, filePath: string) {\n  console.log(\"Retrieving file data from s3\")\n  try {\n    const response = await fetch(\"/api/files/retrieve-metadata\", {\n      method: \"POST\", // Ensure this is POST\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        bucketName: bucketName,\n        directory: filePath,\n      }),\n    });\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.message || \"Failed to fetch Textract data\");\n    }\n\n    const data = await response.json();\n    return data.data;\n  } catch (error) {\n    console.error(\"Error retrieving file data:\", error);\n    alert(\"Error retrieving file data: \" + error.message);\n  }\n};\nexport async function processBankStatementTextract(bucketName: string, filePath: string) {\n  const response = await fetch(\"/api/files/analyze/textract\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({\n      bucketName: bucketName,\n      filePath: filePath,\n    }),\n  });\n\n  const data = await response.json();\n  console.log(data);\n  return data\n};\n\nexport async function createNewDirectory(bucketName: string, filePath: string, newFileName: string) {\n  console.log(\"CREATING NEW DIRECTORY\")\n}\nexport async function processBankStatementTesseract(bucketName: string, filePath: string) {\n  const response = await fetch(\"/api/files/analyze/tesseract\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      bucketName: bucketName,\n      filePath: filePath,\n    }),\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    console.error(\"Error:\", error.error);\n    return;\n  }\n\n  const data = await response.json();\n  console.log(\"Extracted Text:\", data.data.text);\n  return data.data.text\n};\nexport async function parseBankStatementText(text: string) {\n  console.log(\"HERE\")\n  try {\n    const response = await fetch(\"/api/files/analyze/openAI/parse\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ text }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || \"Failed to process text.\");\n    }\n\n    const result = await response.json();\n    return result.parsedData;\n  } catch (error) {\n    console.error(\"Error processing bank statement:\", error);\n    throw error;\n  }\n};\nexport async function produceSummaryOpenAI(text: string) {\n  try {\n    const response = await fetch(\"/api/files/analyze/openAI/summary\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ text }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || \"Failed to process text.\");\n    }\n\n    const result = await response.json();\n    return result.parsedData;\n  } catch (error) {\n    console.error(\"Error processing bank statement:\", error);\n    throw error;\n  }\n};\nexport async function analyzeOpenAI(text: string) {\n  try {\n    const response = await fetch(\"/api/files/analyze/openAI/analysis\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ text }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || \"Failed to process text.\");\n    }\n\n    const result = await response.json();\n    return result.parsedData;\n  } catch (error) {\n    console.error(\"Error processing bank statement:\", error);\n    throw error;\n  }\n};\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file:///Users/roychoi/Desktop/projects/bank-analysis/frontend/app/components/FileSystem/FileSystemTree.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport Box from '@mui/material/Box';\nimport { SimpleTreeView } from '@mui/x-tree-view/SimpleTreeView';\nimport { TreeItem } from '@mui/x-tree-view/TreeItem';\nimport { getMetaData, processBankStatementTesseract } from '@/app/utils/files';\nimport FileSystemTreeMenu from './FileSystemTreeMenu';\nimport FileUploadMenu from './FileUploadMenu';\nimport FolderCreationMenu from './FolderCreationMenu';\nimport { useRouter } from 'next/navigation';\nimport { useBankStatement } from '../../main/dashboard/layout'\ninterface S3Object {\n  key: string;\n  size: number;\n  lastModified: string;\n}\n\ninterface ListDirectoryResponse {\n  directory: string;\n  folders: string[];\n  files: S3Object[];\n}\n\ninterface TreeViewBaseItem {\n  id: string;\n  label: string;\n  children?: TreeViewBaseItem[];\n  hasChildren?: boolean;\n}\n\n/**\n * Maps S3 API response to TreeItems.\n */\nfunction mapS3ResponseToTreeItems(response: ListDirectoryResponse, currPath: string): TreeViewBaseItem[] {\n  const items: TreeViewBaseItem[] = [];\n\n  // Map folders\n  if (Array.isArray(response.folders)) {\n    response.folders.forEach((folder) => {\n      const folderName = folder.replace(/\\/$/, ''); // Remove trailing '/'\n      items.push({\n        id: currPath + folder,\n        label: folderName,\n        hasChildren: true,\n        children: [], // Initially empty\n      });\n    });\n  }\n\n  // Map files\n  if (Array.isArray(response.files)) {\n    response.files.forEach((file) => {\n      if (currPath == file.key) {\n        return\n      }\n      const fileName = file.key.split('/').pop() || file.key; // Extract file name\n      items.push({\n        id: file.key,\n        label: fileName,\n        hasChildren: false,\n        children: [],\n      });\n    });\n  }\n\n  return items;\n}\n\n/**\n * Recursively renders TreeItems.\n */\nfunction renderTree(node: TreeViewBaseItem, handleNodeClick: (nodeId: string, currNode: HTMLElement) => void, handleRightClick: (event: React.MouseEvent,\n  type: 'file' | 'folder' | 'empty',\n  node?: TreeViewBaseItem) => void, handleCloseContextMenu: () => void): React.ReactNode {\n\n  return (\n    <TreeItem\n      key={node.id}\n      itemId={node.id}\n      data-itemid={node.id}\n      label={node.label}\n      onClick={async (event) => {\n        await handleNodeClick(node.id, event.currentTarget as HTMLElement);\n      }} // Attach click handler\n      onContextMenu={(event) => handleRightClick(event, node.hasChildren ? 'folder' : 'file', node)}\n    >\n      {node.children?.map((child) => renderTree(child, handleNodeClick, handleRightClick, handleCloseContextMenu))}\n    </TreeItem>\n  );\n}\nfunction findNodeById(items: TreeViewBaseItem[], nodeId: string): TreeViewBaseItem | null {\n  for (const item of items) {\n    if (item.id === nodeId) {\n      return item; // Found the node\n    }\n    if (item.children) {\n      const found = findNodeById(item.children, nodeId); // Recursively search in children\n      if (found) {\n        return found; // Return if found in children\n      }\n    }\n  }\n  return null; // Node not found\n}\n\n/**\n * Main FileSystemTree Component\n */\nexport default function FileSystemTree() {\n  const [treeItems, setTreeItems] = React.useState<TreeViewBaseItem[]>([]);\n  const [loading, setLoading] = React.useState<boolean>(true);\n  const [error, setError] = React.useState<string | null>(null);\n  const [uploadMenuOpen, setUploadMenuOpen] = React.useState<boolean>(false);\n  const [createFolderMenuOpen, setCreateFolderMenuOpen] = React.useState<boolean>(false);\n  const [currentSelectedFilePath, setCurrentSelectedFilePath] = React.useState<string>('/user1');\n  const [contextMenu, setContextMenu] = React.useState<{\n    mouseX: number;\n    mouseY: number;\n    targetType: 'file' | 'folder' | 'empty';\n    targetId?: string;\n  } | null>(null);\n\n  const [expanded, setExpanded] = React.useState<string[]>([]); // Use array directly\n  const router = useRouter();\n  const { setBankStatementText } = useBankStatement();\n  // Fetch initial data\n  React.useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const data = await getMetaData('iarpus-bankstatement', 'user1/');\n        const mappedItems = mapS3ResponseToTreeItems(data, 'user1/');\n        setTreeItems(mappedItems);\n      } catch (err: any) {\n        console.error('Error fetching metadata:', err);\n        setError('Failed to load initial directory.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []);\n  // Handle node clicks\n  function updateTreeItems(\n    items: TreeViewBaseItem[],\n    nodeId: string,\n    newChildren: TreeViewBaseItem[]\n  ): TreeViewBaseItem[] {\n    return items.map((item) => {\n      if (item.id === nodeId) {\n        // Update the matching node\n        return { ...item, children: newChildren };\n      } else if (item.children) {\n        // Recursively update children\n        return { ...item, children: updateTreeItems(item.children, nodeId, newChildren) };\n      }\n      return item; // Return unchanged for non-matching nodes\n    });\n  }\n\n  const handleNodeClick = async (nodeId: string) => {\n    const node = findNodeById(treeItems, nodeId);\n    handleToggle(node)\n    if (node && node.hasChildren && node.children?.length === 0) {\n      try {\n        const data = await getMetaData('iarpus-bankstatement', nodeId);\n        const newChildren = mapS3ResponseToTreeItems(data, nodeId);\n        setTreeItems((prevItems) => updateTreeItems(prevItems, nodeId, newChildren));\n      } catch (err: any) {\n        console.error('Error fetching subdirectory:', err);\n        setError(`Failed to load contents for ${nodeId}.`);\n      }\n    }\n    else if (node && !node.hasChildren) {\n      const bankStatementText = await processBankStatementTesseract('iarpus-bankstatement', node.id)\n      setBankStatementText(bankStatementText)\n      router.push('/main/dashboard/analysis/summary');\n    }\n\n  };\n  const handleRightClick = (\n    event: React.MouseEvent,\n    type: 'file' | 'folder' | 'empty',\n    node: TreeViewBaseItem\n  ) => {\n    event.preventDefault();\n    event.stopPropagation();\n    setCurrentSelectedFilePath(node.id)\n    setContextMenu({\n      mouseX: event.clientX,\n      mouseY: event.clientY,\n      targetType: type,\n      targetId: node?.id,\n    });\n  };\n  const handleToggle = (currNode: TreeViewBaseItem,) => {\n    if (currNode.children) {\n      setExpanded((prevExpanded) => {\n        if (prevExpanded.includes(currNode.id)) {\n          // If the node is already expanded, remove it\n          return prevExpanded.filter((id) => id !== currNode.id);\n        } else {\n          // Otherwise, add it to the list of expanded nodes\n          return [...prevExpanded, currNode.id];\n        }\n      });\n    }\n  };\n  const handleCloseContextMenu = () => {\n    setContextMenu(null);\n  };\n  if (loading) return <div>Loading file system...</div>;\n  if (error) return <div>Error: {error}</div>;\n  return (\n    <Box sx={{ minHeight: 352, minWidth: 250 }}>\n      {/*      <FolderCreationMenu open={createFolderMenuOpen} setOpen={setCreateFolderMenuOpen}></FolderCreationMenu>\n      <FileUploadMenu currentPath={currentSelectedFilePath} open={uploadMenuOpen} setOpen={setUploadMenuOpen}></FileUploadMenu>\n      <FileSystemTreeMenu setUploadMenuOpen={setUploadMenuOpen} setCreateFolderMenuOpen={setCreateFolderMenuOpen} contextMenu={contextMenu} handleCloseContextMenu={handleCloseContextMenu}></FileSystemTreeMenu>*/}\n\n      <SimpleTreeView expandedItems={expanded}>\n        {treeItems.map((node) => renderTree(node, handleNodeClick, handleRightClick, handleCloseContextMenu))}\n      </SimpleTreeView>\n    </Box>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 418, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 424, "column": 0}, "map": {"version":3,"sources":["file:///Users/roychoi/Desktop/projects/bank-analysis/frontend/app/components/FileSystem/FileSystemDrawer.tsx"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport Box from '@mui/material/Box';\nimport Drawer from '@mui/material/Drawer';\nimport Button from '@mui/material/Button';\nimport FileSystemTree from './FileSystemTree';\nimport FolderIcon from '@mui/icons-material/Folder';\n\nexport default function FileSystemDrawer() {\n  const [open, setOpen] = React.useState(false);\n\n  const toggleDrawer = (newOpen: boolean) => () => {\n    setOpen(newOpen);\n  };\n\n  const DrawerList = (\n    <Box\n      sx={{\n        width: 250,\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        padding: 0, // Remove any extra padding\n        margin: 0, // Remove any extra margin\n      }}\n      role=\"presentation\"\n      onClick={toggleDrawer(false)}\n      onKeyDown={toggleDrawer(false)}\n    >\n      {/* Header containing the folder icon */}\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          padding: '8px 0', // Adjust padding to minimize the gap\n          borderBottom: '1px solid #ddd',\n        }}\n      >\n        <Button\n          onClick={toggleDrawer(false)}\n          sx={{ minWidth: 'unset', padding: 0 }}\n        >\n          <FolderIcon fontSize=\"large\" />\n        </Button>\n      </Box>\n      {/* File tree content */}\n      <Box sx={{ flex: 1, overflowY: 'auto', padding: 0, margin: 0 }}>\n        <FileSystemTree />\n      </Box>\n    </Box>\n  );\n\n  return (\n    <div>\n      <Button onClick={toggleDrawer(true)}>\n        <FolderIcon fontSize=\"large\" />\n      </Button>\n      <Drawer open={open} onClose={toggleDrawer(false)}>\n        {DrawerList}\n      </Drawer>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AAIA;AAHA;AAEA;AAEA;AAHA;AAHA;;;;;;;;AAQe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,sMAAM,QAAQ,CAAC;IAEvC,MAAM,eAAe,CAAC,UAAqB;YACzC,QAAQ;QACV;IAEA,MAAM,2BACJ,8OAAC,+IAAA,CAAA,UAAG;QACF,IAAI;YACF,OAAO;YACP,QAAQ;YACR,SAAS;YACT,eAAe;YACf,SAAS;YACT,QAAQ;QACV;QACA,MAAK;QACL,SAAS,aAAa;QACtB,WAAW,aAAa;;0BAGxB,8OAAC,+IAAA,CAAA,UAAG;gBACF,IAAI;oBACF,SAAS;oBACT,gBAAgB;oBAChB,YAAY;oBACZ,SAAS;oBACT,cAAc;gBAChB;0BAEA,cAAA,8OAAC,qJAAA,CAAA,UAAM;oBACL,SAAS,aAAa;oBACtB,IAAI;wBAAE,UAAU;wBAAS,SAAS;oBAAE;8BAEpC,cAAA,8OAAC,2JAAA,CAAA,UAAU;wBAAC,UAAS;;;;;;;;;;;;;;;;0BAIzB,8OAAC,+IAAA,CAAA,UAAG;gBAAC,IAAI;oBAAE,MAAM;oBAAG,WAAW;oBAAQ,SAAS;oBAAG,QAAQ;gBAAE;0BAC3D,cAAA,8OAAC,kJAAA,CAAA,UAAc;;;;;;;;;;;;;;;;IAKrB,qBACE,8OAAC;;0BACC,8OAAC,qJAAA,CAAA,UAAM;gBAAC,SAAS,aAAa;0BAC5B,cAAA,8OAAC,2JAAA,CAAA,UAAU;oBAAC,UAAS;;;;;;;;;;;0BAEvB,8OAAC,qJAAA,CAAA,UAAM;gBAAC,MAAM;gBAAM,SAAS,aAAa;0BACvC;;;;;;;;;;;;AAIT"}},
    {"offset": {"line": 546, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 552, "column": 0}, "map": {"version":3,"sources":["file:///Users/roychoi/Desktop/projects/bank-analysis/frontend/app/main/dashboard/layout.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useState, useContext } from 'react';\nimport FileSystemDrawer from '@/app/components/FileSystem/FileSystemDrawer';\n// Create a context for the bank statement\nconst BankStatementContext = createContext<{\n  bankStatementText: string;\n  setBankStatementText: React.Dispatch<React.SetStateAction<string>>;\n} | null>(null);\n\n// Create a custom hook for easier access to the context\nexport const useBankStatement = () => {\n  const context = useContext(BankStatementContext);\n  if (!context) {\n    throw new Error('useBankStatement must be used within an AnalysisLayout');\n  }\n  return context;\n};\n\nexport default function AnalysisLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const [bankStatementText, setBankStatementText] = useState<string>('');\n\n  return (\n    <BankStatementContext.Provider value={{ bankStatementText, setBankStatementText }}>\n      <FileSystemDrawer></FileSystemDrawer>\n      <section>{children}</section>\n    </BankStatementContext.Provider>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAIA,0CAA0C;AAC1C,MAAM,qCAAuB,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAG/B;AAGH,MAAM,mBAAmB;IAC9B,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AAEe,SAAS,eAAe,EACrC,QAAQ,EAGT;IACC,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAEnE,qBACE,8OAAC,qBAAqB,QAAQ;QAAC,OAAO;YAAE;YAAmB;QAAqB;;0BAC9E,8OAAC,oJAAA,CAAA,UAAgB;;;;;0BACjB,8OAAC;0BAAS;;;;;;;;;;;;AAGhB"}},
    {"offset": {"line": 599, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}